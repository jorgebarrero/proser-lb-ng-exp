<app-mainheader></app-mainheader>

<app-alert [alertMessage]="alertMessage"></app-alert>

<section id="register">

    <div class="container">
      <div class="row">
        <div class=" mx-auto">
          <div class="card-login">
            <div class="card mt-3">
              <div class="card-body">
                  <h3 class="h2 mb-3 font-weight-normal text-center">Registro de usuario</h3>
                  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

                    <div class="register-form">
                        <div class="form-group">
                            <label class="register-label" >Nombres</label>
                            <input type="text" formControlName="firstname" class="form-control register-input" [ngClass]=
                            "{ 'is-invalid': f.firstname.errors }" />

                            <div *ngIf="f.firstname.dirty && f.firstname.errors" class="register-error">
                                <div *ngIf="f.firstname.errors.required">El nombre es obligatorio</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="register-label">Apellidos</label>
                            <input type="text" formControlName="lastname" class="form-control register-input " [ngClass]="{ 'is-invalid': f.lastname.errors }" />
                            <div *ngIf="f.lastname.dirty && f.lastname.errors" class="register-error">
                                <div *ngIf="f.lastname.errors.required">Los apellidos son obligatorios</div>
                            </div>
                        </div>

                        <div class="form-group">
                          <label class="register-label">Nombre de usuario</label>
                          <input type="text" formControlName="username" class="form-control register-input" [ngClass]="{ 'is-invalid': f.username.errors }" />
                          <div *ngIf="f.username.dirty && f.username.errors" class="register-error">
                              <div *ngIf="f.username.errors.required">Usuario es obligatorios</div>
                              <div *ngIf="f.username.errors.minlength">El usuario debe tener al menos 6 caracteres</div>
                          </div>
                      </div>
                        <div class="form-group">
                            <label class="register-label">Email</label>
                            <input type="email" formControlName="email" class="form-control register-input" [ngClass]="{ 'is-invalid': f.email.errors }" />
                            <div *ngIf="f.email.dirty && f.email.errors" class="register-error">
                                <div *ngIf="f.email.errors.required">Email es obligatorio</div>
                                <div *ngIf="f.email.errors.email">Email debe ser una direccion de correo válida</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="register-label">Clave</label>
                            <input type="password" formControlName="password" class="form-control register-input" [ngClass]="{ 'is-invalid': f.password.errors }" />
                            <div *ngIf="f.password.dirty && f.password.errors" class="register-error">
                                <div *ngIf="f.password.errors.required">La clave es obligatoria</div>
                                <div *ngIf="f.password.errors.minlength">La clave debe tener al menos 6 caracteres</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="register-label">Confirmar clave</label>
                            <input type="password" formControlName="confirmPassword" class="form-control register-input" [ngClass]="{ 'is-invalid': f.confirmPassword.errors }" />
                            <div *ngIf="f.confirmPassword.dirty && f.confirmPassword.errors" class="register-error">
                                <div *ngIf="f.confirmPassword.errors.required">La confirmación de la clave es obligatoria</div>
                                <div *ngIf="f.confirmPassword.errors.mustMatch">Las claves deben coincidir</div>
                            </div>
                        </div>
                    </div>

                      <div class="form-group text-center mt-3 mb-0 register-button-group ">


                        <div >
                          <button class="btn btn-secondary register-button"
                          (click)="onResetForm()">Borrar forma</button>
                        </div>

                        <div *ngIf="registerForm.valid">
                          <button class="btn btn-success register-button"
                          (click)="onRegister(content)">Registrar</button>
                          </div>
                      </div>
                      <div class="text-center register-login-text">
                          <a routerLink="/login" class="register-label"
                        >Si tiene cuenta, ingrese aquí</a>
                    </div>
                  </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


<ng-template #content let-modal>
<app-register-welcome [registerForm]="registerForm"></app-register-welcome>
</ng-template>
